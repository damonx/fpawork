# Fisher & Paykel Microservice

This micro services module provides the following APIs:
1. SOAP clients & RESTful services to find address for customers based on the required dataset to be used.
2. RESTful services to generate appropriate PDFs for various products being displayed on the website. 
   
The following technologies are for the solution:

* [Java 1.8](https://www.oracle.com/technetwork/java/javase/downloads/index.html) 
* [Spring Boot](http://spring.io/projects/spring-boot)
* [Spring Based RESTful Web services](https://spring.io/guides/gs/rest-service/)
* [Jasper Reports](https://community.jaspersoft.com/project/jasperreports-library)
* [iText](https://itextpdf.com/)

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

### Prerequisites

* [Java : JDK 1.8](https://www.oracle.com/technetwork/java/javase/downloads/index.html) - Development and Runtime environment
* [Maven](https://maven.apache.org/) - Dependency Management

### Installation & Deployment

1. The source code can be cloned on to any IDE of your choice from our [bitbucket repository] (https://bitbucket.org/fisherpaykeldigital/fisherpaykel-reports/src/master/)
2. Import this as a Maven enabled Java Project in your IDE and setup classpath and all other relevant projects settings.
3. Once project is set, it can be built and deployed locally issuing the following commad:
   ```mvn clean install spring-boot:run -Dspring.profiles.active={environment variable dev, uat or prod}```
4. If everything went well this HTTP Sample GET Request: *(http://{application}:{port}/report/test)* should return a response "Welcome to FPA QRG Report Microservice"
5. Now you're all set to generate QRGs.
6. If you deploy the target not for the first time, please comment out jaxws-maven-plugin in pom.xml and run "mvn -U clean -PsaveGenerated install". 

## Generating QRGs

1. QRG for any product can be generated by invoking REST call over HTTP on the endpoint : http://{application}:{port}/report/itext/qrg/v1?country={accepted country code}, accepted country code :- {au,ca,nz,us,uk}
2. This endpoint expects a POST request with a JSON payload which is presented in [sample-json-payload](https://bitbucket.org/fisherpaykeldigital/fisherpaykel-reports/src/65381cc9e632/sample-json-payload.json?at=master)
3. Base64 encoded option by invoking the REST endpoint appending "encoded=true" : http://{application}:{port}/report/itext/qrg/v1?country=nz&encoded=true, by default,i.e. "encoded" parameter is omitted, PDF file won't be encoded.

## Fetching Existing QRGs via SKU
* This endpoint expeces a GET requesthttp://{application}:{port}/report/itext/qrg/b2b/v1?country=nz&sku=23512

## API Document
* Please visit http://{application}:{port}/swagger-ui.html#/ to find the API document generated via Swagger2 plugin.

## Built With

* [Maven](https://maven.apache.org/) - Dependency Management


## Versioning

For the versions available, see the [tags on this repository](https://bitbucket.org/fisherpaykeldigital/fisherpaykel-reports/). 

## Authors
* [**Damon Xu**](https://bitbucket.org/akldamonx/)
